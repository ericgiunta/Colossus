# Colossus

The goal of Colossus is to provide an open-source means of performing
survival analysis on big data with complex risk formulas. Colossus is
designed to perform Cox Proportional Hazard regressions and Poisson
regressions on datasets loaded as data.tables or data.frames. The risk
models allowed are sums or products of linear, log-linear, or several
other radiation dose response formulas highlighted in the vignettes.
Additional plotting capabilities are available.

By default, a fully portable version of the code is compiled, which does
not support OpenMP on every system. Note that Colossus requires OpenMP
support to perform parallel calculations. The environment variable
“R_COLOSSUS_NOT_CRAN” is checked to determine if OpenMP should be
disabled for linux compiling with clang. The number of cores is set to 1
if the environment variable is empty, the operating system is detected
as linux, and the default compiler or R compiler is clang. Colossus
testing checks for the “NOT_CRAN” variable to determine if additional
tests should be run. Setting “NOT_CRAN” to “false” will disable the
longer tests. Currently, OpenMP support is not configured for linux
compiling with clang.

Note: From versions 1.3.1 to 1.4.1 the expected inputs changed.
Regressions are now run with CoxRun and PoisRun and formula inputs.
Please see the “Unified Equation Representation” vignette for more
details.

## Example

This is a basic example which shows you how to solve a common problem:

``` r
library(data.table)
library(parallel)
library(Colossus)
## basic example code reproduced from the starting-description vignette

df <- data.table(
  "UserID" = c(112, 114, 213, 214, 115, 116, 117),
  "Starting_Age" = c(18, 20, 18, 19, 21, 20, 18),
  "Ending_Age" = c(30, 45, 57, 47, 36, 60, 55),
  "Cancer_Status" = c(0, 0, 1, 0, 1, 0, 0),
  "a" = c(0, 1, 1, 0, 1, 0, 1),
  "b" = c(1, 1.1, 2.1, 2, 0.1, 1, 0.2),
  "c" = c(10, 11, 10, 11, 12, 9, 11),
  "d" = c(0, 0, 0, 1, 1, 1, 1)
)

model <- Cox(Starting_Age, Ending_Age, Cancer_Status) ~ loglinear(a, 0) + linear(b, c, 1) + plinear(d, 2) + multiplicative()

a_n <- c(0.1, 0.1, 0.1, 0.1)

keep_constant <- c(0, 0, 0, 0)

control <- list(
  "lr" = 0.75, "maxiter" = 100, "halfmax" = 5, "epsilon" = 1e-9,
  "deriv_epsilon" = 1e-9, "step_max" = 1.0,
  "verbose" = 2, "ties" = "breslow"
)

e <- CoxRun(model, df, a_n = a_n, control = control)
print(e)
#> |-------------------------------------------------------------------|
#> Final Results
#>    Covariate Subterm Term Number Central Estimate Standard Error 2-tail p-value
#>       <char>  <char>       <int>            <num>          <num>          <num>
#> 1:         a  loglin           0         21.67085            NaN            NaN
#> 2:         b     lin           1          0.10000            NaN            NaN
#> 3:         c     lin           1          0.10000            NaN            NaN
#> 4:         d    plin           2          0.10000            Inf              1
#> 
#> Cox Model Used
#> -2*Log-Likelihood: 2.64,  AIC: 10.64
#> Iterations run: 27
#> maximum step size: 7.50e-01, maximum first derivative: 5.49e-10
#> Analysis converged
#> Run finished in 0.04 seconds
#> |-------------------------------------------------------------------|
```

# Package index

## All functions

- [`CaseControlRun()`](CaseControlRun.md) : Fully runs a case-control
  regression model, returning the model and results
- [`ColossusCoxSurv()`](ColossusCoxSurv.md) : Interprets basic cox
  survival formula RHS
- [`ColossusLogitSurv()`](ColossusLogitSurv.md) : Interprets basic
  logistic survival formula RHS with no grouping
- [`ColossusPoisSurv()`](ColossusPoisSurv.md) : Interprets basic poisson
  survival formula RHS
- [`CoxRun()`](CoxRun.md) : Fully runs a cox or fine-gray regression
  model, returning the model and results
- [`CoxRunMulti()`](CoxRunMulti.md) : Fully runs a cox or fine-gray
  regression model with multiple column realizations, returning the
  model and results
- [`Date_Shift()`](Date_Shift.md) : Automates creating a date difference
  column
- [`EventAssignment()`](EventAssignment.md) : Generic background/excess
  event calculation function
- [`EventAssignment(`*`<default>`*`)`](EventAssignment.default.md) :
  Predicts how many events are due to baseline vs excess
- [`EventAssignment(`*`<poisres>`*`)`](EventAssignment.poisres.md) :
  Predicts how many events are due to baseline vs excess for a completed
  poisson model
- [`EventAssignment(`*`<poisresbound>`*`)`](EventAssignment.poisresbound.md)
  : Predicts how many events are due to baseline vs excess for a
  completed poisson likelihood boundary regression
- [`Event_Count_Gen()`](Event_Count_Gen.md) : uses a table, list of
  categories, and list of event summaries to generate person-count
  tables
- [`Event_Time_Gen()`](Event_Time_Gen.md) : uses a table, list of
  categories, list of summaries, list of events, and person-year
  information to generate person-time tables
- [`Joint_Multiple_Events()`](Joint_Multiple_Events.md) : Automates
  creating data for a joint competing risks analysis
- [`LikelihoodBound()`](LikelihoodBound.md) : Generic likelihood
  boundary calculation function
- [`LikelihoodBound(`*`<coxres>`*`)`](LikelihoodBound.coxres.md) :
  Calculates the likelihood boundary for a completed cox model
- [`LikelihoodBound(`*`<default>`*`)`](LikelihoodBound.default.md) :
  Generic likelihood boundary calculation function, default option
- [`LikelihoodBound(`*`<poisres>`*`)`](LikelihoodBound.poisres.md) :
  Calculates the likelihood boundary for a completed Poisson model
- [`Likelihood_Ratio_Test()`](Likelihood_Ratio_Test.md) : Defines the
  likelihood ratio test
- [`Linked_Dose_Formula()`](Linked_Dose_Formula.md) : Calculates Full
  Parameter list for Special Dose Formula
- [`Linked_Lin_Exp_Para()`](Linked_Lin_Exp_Para.md) : Calculates The
  Additional Parameter For a linear-exponential formula with known
  maximum
- [`LogisticRun()`](LogisticRun.md) : Fully runs a logistic regression
  model, returning the model and results
- [`OMP_Check()`](OMP_Check.md) : Checks the OMP flag
- [`PoisRun()`](PoisRun.md) : Fully runs a poisson regression model,
  returning the model and results
- [`PoisRunJoint()`](PoisRunJoint.md) : Fully runs a joint poisson
  regression model, returning the model and results
- [`PoisRunMulti()`](PoisRunMulti.md) : Fully runs a poisson regression
  model with multiple column realizations, returning the model and
  results
- [`RelativeRisk()`](RelativeRisk.md) : Generic relative risk
  calculation function
- [`RelativeRisk(`*`<coxres>`*`)`](RelativeRisk.coxres.md) : Calculates
  hazard ratios for a reference vector
- [`RelativeRisk(`*`<default>`*`)`](RelativeRisk.default.md) : Generic
  relative risk calculation function, default option
- [`Replace_Missing()`](Replace_Missing.md) : Automatically assigns
  missing values in listed columns
- [`Residual()`](Residual.md) : Generic Residual calculation function
- [`Residual(`*`<default>`*`)`](Residual.default.md) : Generic Residual
  calculation function, default option
- [`Residual(`*`<poisres>`*`)`](Residual.poisres.md) : Calculates the
  Residuals for a completed poisson model
- [`System_Version()`](System_Version.md) : Checks OS, compilers, and
  OMP
- [`Time_Since()`](Time_Since.md) : Automates creating a date since a
  reference column
- [`factorize()`](factorize.md) : Splits a parameter into factors
- [`gen_time_dep()`](gen_time_dep.md) : Applies time dependence to
  parameters
- [`get_form()`](get_form.md) : Interprets a Colossus formula and makes
  necessary changes to data
- [`get_form_joint()`](get_form_joint.md) : Interprets a Poisson joint
  formula and makes necessary changes to data
- [`plot(`*`<coxres>`*`)`](plot.coxres.md) : Performs Cox Proportional
  Hazard model plots
- [`plotMartingale()`](plotMartingale.md) : Generic Martingale Residual
  Plotting function
- [`plotMartingale(`*`<coxres>`*`)`](plotMartingale.coxres.md) :
  Performs Cox Proportional Hazard model martingale residual plots
- [`plotMartingale(`*`<default>`*`)`](plotMartingale.default.md) :
  Generic Martingale Residual Plotting function, default option
- [`plotRisk()`](plotRisk.md) : Generic Risk Plotting function
- [`plotRisk(`*`<coxres>`*`)`](plotRisk.coxres.md) : Performs Cox
  Proportional Hazard model hazard ratio plots
- [`plotRisk(`*`<default>`*`)`](plotRisk.default.md) : Generic Risk
  Plotting function, default option
- [`plotSchoenfeld()`](plotSchoenfeld.md) : Generic Schoenfeld Residual
  Plotting function
- [`plotSchoenfeld(`*`<coxres>`*`)`](plotSchoenfeld.coxres.md) :
  Performs Cox Proportional Hazard model schoenfeld residual plots
- [`plotSchoenfeld(`*`<default>`*`)`](plotSchoenfeld.default.md) :
  Generic Schoenfeld Residual Plotting function, default option
- [`plotSurvival()`](plotSurvival.md) : Generic Survival Plotting
  function
- [`plotSurvival(`*`<coxres>`*`)`](plotSurvival.coxres.md) : Performs
  Cox Proportional Hazard model survival plots
- [`plotSurvival(`*`<default>`*`)`](plotSurvival.default.md) : Generic
  Survival Plotting function, default option
- [`print(`*`<caseconres>`*`)`](print.caseconres.md) : Prints a
  case-control regression output clearly
- [`print(`*`<coxres>`*`)`](print.coxres.md) : Prints a cox regression
  output clearly
- [`print(`*`<coxresbound>`*`)`](print.coxresbound.md) : Prints a cox
  likelihood boundary regression output clearly
- [`print(`*`<logitres>`*`)`](print.logitres.md) : Prints a logistic
  regression output clearly
- [`print(`*`<poisres>`*`)`](print.poisres.md) : Prints a poisson
  regression output clearly
- [`print(`*`<poisresbound>`*`)`](print.poisresbound.md) : Prints a
  poisson likelihood boundary regression output clearly

# Articles

### All vignettes

- [Alternative Regression Options](Alt_Run_Opt.md):
- [List of Control Options](Control_Options.md):
- [Generating Person-Count and Person-Time
  Tables](count_time_tables.md):
- [Dose Response Formula Terms](Dose_Formula_Inputs.md):
- [Unified Equation Representation](Equation_Expression.md):
- [Excess and Predicted Cases](Excess_and_Predicted_Cases.md):
- [Gradient and Hessian Approaches](Grad_Hess.md):
- [Logistic Regression](Logistic.md):
- [Matched Case-Control Logistic Regression](Matched_Case_Control.md):
- [Multiple Realization Methods](Multi_Realization.md):
- [Functions for Plotting and Analysis](Plotting_And_Analysis.md):
- [Script comparisons with 32-bit
  Epicure](Script_Comparison_Epicure.md):
- [SMR Analysis](SMR_Analysis.md):
- [Colossus Description](Starting-Description.md):
- [Time Dependent Covariate Use](Time_Dep_Cov.md):
- [Confidence Interval Selection](Wald_and_Log_Bound.md):
